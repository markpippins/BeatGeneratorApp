<mat-tab-group>
  <div *ngFor="let instrument of instruments;">
    <mat-tab *ngIf="instrument.controlCodes.length > 0" label="{{instrument.name}}">
      <div class="area-header">
        <h3>{{ instrument.name }}</h3>
      </div>
      <div class="slider-area">

        <div class="area-container">
          <div *ngFor="let panel of getPanelsForInstrument(instrument.name)">
            <div class="area" *ngIf="!panel.startsWith('Other')">
              <div class="area-content">
                <div class="area-header">
                  <h4>{{ panel }}</h4>
                </div>

                <div  class="short-control">
                  <div *ngFor="let controlCode of getControlCodes(instrument, panel);  let index = index">
                    <div  *ngIf="controlIsBinary(controlCode) || controlIsShortRange(controlCode)" class="area">
                      <div>
                        <label>
                          {{controlCode.name}}
                        </label>
                        <div class="area-control">
                          <div *ngIf="controlIsBinary(controlCode)">
                            <input type="checkbox" />
                          </div>

                          <div *ngIf="controlIsShortRange(controlCode)">
                            <select id="{{controlCode.id + '-' + 'select'}}" name="{{controlCode.id + '-' + 'select'}}">
                              <!-- <label for="{{controlCode.name}}">{{caption.description}}</label><br> -->
                              <option *ngFor="let caption of controlCode.captions" value="{{caption.code}}">
                                {{caption.description}}</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="area" *ngFor="let controlCode of getControlCodes(instrument, panel);  let index = index">
                  <div class="area-controls">
                    <div class="area-control">
                      <app-midi-knob *ngIf="controlIsWideRange(controlCode)" [index]="index" [instrument]="instrument"
                        [name]="controlCode.name" [cc]="controlCode.code" [panel]="panel"></app-midi-knob>

                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <div *ngFor="let panel of getPanelsForInstrument(instrument.name)">
            <div class="area" *ngIf="panel.startsWith('Other')">
              <div class="area-content">
                <div class="area-header">
                  <h4>{{ panel }}</h4>
                </div>
                <div class="area-controls"
                  *ngFor="let controlCode of getOtherControlCodes(instrument.name); let index = index;">
                  <div class="area-control">
                    <div class="p-field p-col-12 p-md-4">
                      <!-- <p-knob [min]="1" [strokeWidth]="getStrokeWidth()" [max]="127" [size]="65"
                        [styleClass]="getStyleClass()" [rangeColor]=" getRangeColor()" [textColor]="getTextColor()"
                        [valueTemplate]="getValueTemplate(controlCode)" [valueColor]="getValueColor()"
                        [(ngModel)]="value5" [step]="10"></p-knob> -->
                      <app-midi-knob [index]="index" [instrument]="instrument" [name]="controlCode"
                        [panel]="panel"></app-midi-knob>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </mat-tab>
  </div>
</mat-tab-group>
